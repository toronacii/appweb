(function(b){b.fn.bootstrapCaptcha=function(f){var a;this.attr("data-valid","false");this.attr("data-mouseUsed","false");this.iconSize="3x";this.displayTargetArrows=this.textPrompt=this.clearWhenCorrect=this.resetInvalidDrop=!0;this.resetTitle="Oops...try again";a=b.extend(!0,this,f);a.callback=a.onDrop&&"function"===typeof a.onDrop?!0:!1;a.guessedWrong=!1;a.icons="envelope anchor pencil bullhorn fire-extinguisher camera wrench cut beaker magic heart cogs trophy fire bell money truck coffee lightbulb paper-clip lock credit-card headphones microphone rocket fighter-jet search beer eye-open magnet ambulance home glass facetime-video thumbs-up gift book road star music user shield puzzle-piece bolt briefcase globe leaf circle-blank calendar frown question print check smile key keyboard".split(" ");
a.iconNames={envelope:"envelope",anchor:"anchor",pencil:"pencil",bullhorn:"bullhorn","fire-extinguisher":"fire extinguisher",camera:"camera",wrench:"wrench",cut:"scissors",beaker:"beaker",magic:"magic wand",heart:"heart",cogs:"cogs",trophy:"trophy",fire:"fire",bell:"bell",money:"money",truck:"truck",coffee:"coffee cup",lightbulb:"lightbulb","paper-clip":"paper clip",lock:"lock","credit-card":"credit card",headphones:"headphones",microphone:"microphone",smile:"smily face",rocket:"rocket","fighter-jet":"fighter jet",
search:"magnifying glass",beer:"beer mug","eye-open":"eye",magnet:"magnet",ambulance:"ambulance",home:"house",glass:"glass","facetime-video":"movie camera","thumbs-up":"thumbs-up",gift:"gift",book:"book",keyboard:"keyboard",road:"road",star:"star",music:"musical notes",user:"person",shield:"shield","puzzle-piece":"puzzle piece",bolt:"lightning bolt",question:"question mark",briefcase:"briefcase",globe:"globe",leaf:"leaf","circle-blank":"circle",calendar:"calendar",check:"check mark",frown:"frown",
key:"key",print:"printer"};a.used=[];a.storedIcons=[];a.mouseUsed=!1;a.bsValid="";a.str="";a.validate=function(c){var e="icon-"+a.bsValid,d={valid:!1,mouseUsed:!1};a.attr("data-valid","false");a.attr("data-mouseUsed","false");if(a.mouseUsed)if(d.mouseUsed=!0,a.attr("data-mouseUsed","true"),c.hasClass(e)){if(a.attr("data-valid","true"),d.valid=!0,b("#bsBoop").append(b("<i/>",{"class":"hide valid-icon icon-"+a.iconSize+" icon-"+a.bsValid,id:"bsValidIcon"})),c.hide(),b("#bsTargetSpan").empty().append("<strong>Correct!</strong>"),
b(".icon-bullseye").fadeOut(function(){b("#bsCaptchaTarget").removeClass("alert-danger").addClass("alert-success");b("#bsValidIcon").fadeIn()}),!0===a.clearWhenCorrect&&b(".bsCaptchaRemove").slideUp(),!0===a.callback)a.onDrop(d)}else if(!0===a.resetInvalidDrop)a.guessedWrong=!0,a.makeLayout();else{if(b("#bsCaptchaError").empty().append("Try again"),!0===a.callback)a.onDrop(d)}else if(!0===a.callback)a.onDrop(d)};a.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};a.addIcon=function(){var c=
a.getRandomInt(0,a.icons.length-1);-1===b.inArray(c,a.used)&&(a.used.push(c),b("<i/>",{"class":"bsDraggable icon-"+a.iconSize+" icon-"+a.icons[c]}).appendTo("#bsCaptchaOut"),b("#bsCaptchaOut").append("&nbsp;&nbsp;"),a.storedIcons.push(a.icons[c]));6>a.used.length?a.addIcon():(c=a.getRandomInt(0,a.storedIcons.length-1),!0===a.textPrompt?b("#bsWhat").empty().append("<strong>"+a.iconNames[a.storedIcons[c]]+"</strong> icon"):(b("#bsWhat").empty().append(b("<i/>",{"class":"icon-"+a.iconSize+" icon-"+a.storedIcons[c]})),
b("#bsWhat").append(" icon ")),b("#bsCaptchaTarget").append(b("<li/>",{id:"bsBoop"})),a.bsValid=a.storedIcons[c],b(".bsDraggable").draggable({revert:!0,cursor:"move",helper:"clone"}).on("mousedown",function(){a.mouseUsed=!0}),b("#bsCaptchaTarget").droppable({accept:".bsDraggable",activeClass:"ui-state-highlight",drop:function(b,c){a.validate(c.draggable)}}),b("#bootstrapCaptchaDiv").slideDown())};a.fisherYates=function(){var b=a.icons.length,e,d;if(0===b)return!1;for(;--b;)e=Math.floor(Math.random()*
(b+1)),d=a.icons[b],a.icons[b]=a.icons[e],a.icons[e]=d;a.addIcon()};a.makeLayout=function(){a.used=[];a.storedIcons=[];a.mouseUsed=!1;a.bsValid="";a.str="";a.empty();b("<div/>",{"class":"hide",id:"bootstrapCaptchaDiv"}).appendTo(a);b("<div/>",{"class":"row-fluid bsCaptchaDiv bsCaptchaRemove"}).appendTo("#bootstrapCaptchaDiv");b("<ul/>",{"class":"text-center span12",id:"bsInstructions"}).appendTo(".bsCaptchaDiv:last").append('<li>Please drag and drop the <span id="bsWhat"></span> below:</li>');!0===
a.guessedWrong&&b("#bsInstructions").prepend("<li>"+a.resetTitle+"</li>");b("<div/>",{"class":"row-fluid bsCaptchaDiv bsCaptchaRemove"}).appendTo("#bootstrapCaptchaDiv");b("<ul/>",{"class":"span12 text-center"}).appendTo(".bsCaptchaDiv:last").append('<li id="bsCaptchaOut"></li>');b("<div/>",{"class":"row-fluid bsCaptchaRemove"}).appendTo("#bootstrapCaptchaDiv").append(b("<p/>",{"class":"span12",html:"<hr>"}));b("<div/>",{"class":"row-fluid bsCaptchaDiv"}).appendTo("#bootstrapCaptchaDiv");b("<ul/>",
{"class":"span12 text-center"}).appendTo(".bsCaptchaDiv:last").append('<li id="bsTargetSpanLI">&nbsp</li>');a.str='<span id="bsTargetSpan">';a.displayTargetArrows?(a.str+='<i class="icon-arrow-down icon-'+a.iconSize+'"></i>',a.str+='&nbsp;<strong><span id="bsCaptchaError">to this target</span></strong>&nbsp;',a.str+='<i class="icon-arrow-down icon-'+a.iconSize+'"></i>'):a.str+='<strong><span id="bsCaptchaError">to that target</span></strong>';a.str+="</span>";b("#bsTargetSpanLI").append(a.str);b("<div/>",
{"class":"row-fluid bsCaptchaDiv"}).appendTo("#bootstrapCaptchaDiv");b("<ul/>",{"class":"span4 offset4 text-center well well-small alert alert-danger",id:"bsCaptchaTarget"}).appendTo(".bsCaptchaDiv:last").append('<li><i class="icon-bullseye icon-'+a.iconSize+'"></i></li>');a.fisherYates()};if(b("body").hasClass("bootstrapCaptcha"))return this;b("body").addClass("bootstrapCaptcha");this.makeLayout();return this}})(jQuery);
